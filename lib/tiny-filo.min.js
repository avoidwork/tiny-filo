/**
 * Tiny FILO cache for Client or Server
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2019
 * @license BSD-3-Clause
 * @version 1.1.0
 */(function(a){function b(a=1e3,b=0){return new c(a,b)}// Node, AMD & window supported
class c{constructor(a=0,b=0){this.first=null,this.items=new Map,this.last=null,this.max=a,this.size=0,this.ttl=b}has(a){return this.items.has(a)}clear(){return this.first=null,this.items.clear(),this.last=null,this.size=0,this}delete(a){if(this.has(a)){const b=this.items.get(a);this.items.delete(a),this.size--,null!==b.prev&&(b.prev.next=b.next),null!==b.next&&(b.next.prev=b.prev),this.first===b&&(this.first=b.next),this.last===b&&(this.last=b.prev)}return this}evict(){const a=this.last;return this.items.delete(a.key),this.last=a.prev,this.last.next=null,this.size--,this}get(a){let b;if(this.has(a)){const c=this.items.get(a);0<this.ttl&&c.expiry<=new Date().getTime()?this.delete(a):b=c.value}return b}keys(){return Array.from(this.items.keys())}set(a,b){if(this.has(a))this.items.set(a,b);else{0<this.max&&this.size===this.max&&this.evict();const c={expiry:0<this.ttl?new Date().getTime()+this.ttl:this.ttl,key:a,prev:this.last,next:null,value:b};this.items.set(a,c),1==++this.size?(this.first=c,this.last=c):(this.last.next=c,this.last=c)}return this}}"undefined"==typeof exports?"function"==typeof define&&void 0!==define.amd?define(()=>b):a.filo=b:module.exports=b})("undefined"==typeof window?global:window);
//# sourceMappingURL=tiny-filo.min.js.map